@echo off
chcp 65001 >nul
title í‚¤ì›€ ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸

echo ========================================
echo í‚¤ì›€ ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸
echo ========================================
echo.

echo í˜„ìž¬ ì‹œê°„: %date% %time%
echo.

REM Python í™˜ê²½ í™•ì¸
echo ðŸ” Python í™˜ê²½ í™•ì¸ ì¤‘...
python --version
if %errorlevel% neq 0 (
    echo âŒ Pythonì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
    pause
    exit /b 1
)

REM ê°€ìƒí™˜ê²½ í™œì„±í™” (ìžˆëŠ” ê²½ìš°)
if exist "venv\Scripts\activate.bat" (
    echo ðŸ”„ ê°€ìƒí™˜ê²½ í™œì„±í™” ì¤‘...
    call venv\Scripts\activate.bat
)

REM í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸
echo ðŸ“¦ íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸ ì¤‘...
pip install -r requirements.txt

REM ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
if not exist "logs" mkdir logs

echo.
echo ðŸš€ ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì‹œìž‘...
echo.
echo âš ï¸ ì£¼ì˜ì‚¬í•­:
echo 1. í‚¤ì›€ ì˜ì›…ë¬¸ì´ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
echo 2. ì˜ì›…ë¬¸ì— ë¡œê·¸ì¸ë˜ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.
echo 3. ëª¨ì˜íˆ¬ìž ê³„ì¢Œê°€ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.
echo.

REM ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python test_deposit.py

if %errorlevel% equ 0 (
    echo.
    echo âœ… ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
    echo.
    echo ì´ì œ ìžë™ë§¤ë§¤ ì‹œìŠ¤í…œì—ì„œ ì‹¤ì œ ê³„ì¢Œ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    echo.
) else (
    echo.
    echo âŒ ì˜ˆìˆ˜ê¸ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    echo.
    echo ë¬¸ì œ í•´ê²° ë°©ë²•:
    echo 1. í‚¤ì›€ ì˜ì›…ë¬¸ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
    echo 2. ì˜ì›…ë¬¸ì— ë¡œê·¸ì¸ë˜ì–´ ìžˆëŠ”ì§€ í™•ì¸
    echo 3. ëª¨ì˜íˆ¬ìž ê³„ì¢Œê°€ ìžˆëŠ”ì§€ í™•ì¸
    echo 4. Open API+ ì‚¬ìš© ì‹ ì²­ì´ ìŠ¹ì¸ë˜ì—ˆëŠ”ì§€ í™•ì¸
    echo.
)

echo í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ë ¤ë©´ logs í´ë”ë¥¼ ì—´ì–´ì£¼ì„¸ìš”.
echo.
echo ì•„ë¬´ í‚¤ë‚˜ ëˆ„ë¥´ë©´ ì¢…ë£Œë©ë‹ˆë‹¤...
pause >nul 